<html>
  <head>
    <link href="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.css" rel="stylesheet">
    <script src="https://unpkg.com/material-components-web@latest/dist/material-components-web.min.js"></script>
  </head>
  <body>

    <!-- Insert everything below this for the chat component to work, styles in the Head tag are for the https://material.io/ classes used for the buttons. -->

    <!-- this button only appears if there are agents online in Salesforce with the corresponding skill -->
      <button class="mdc-button mdc-button--outlined" onclick="liveagent.startChatWithWindow('573P00000004HZf', 'ChatWindow')">
        <div class="mdc-button__ripple"></div>
        <span class="mdc-button__label">Chat Now</span>
      </button>
  
      <button id="liveagent_button_offline_573P00000004HZf" style="display: none" class="mdc-button mdc-button--outlined" disabled>
        <div class="mdc-button__ripple"></div>
        <span class="mdc-button__label">No Agents Available</span>
      </button>

      <div name="ChatWindow">
        CHAT GOES HERE?
      </div>
 
    <!-- to replace the buttons above with the default way of initiating a chat (Just hyperlinks) use the following 
        
        <a
          id="liveagent_button_online_573P00000004HZf"
          href="javascript://Chat"
          style="display: none"
          onclick="liveagent.startChat('573P00000004HZf')"
        >
          Online Chat Content
        </a>
      
        <div id="liveagent_button_offline_573P00000004HZf" style="display: none">
          Offline Chat Content
        </div>
    
    -->

    <script type="text/javascript">
      if (!window._laq) {
        window._laq = [];
      }
      window._laq.push(function () {
        liveagent.showWhenOnline(
          "573P00000004HZf",
          document.getElementById("liveagent_button_online_573P00000004HZf")
        );
        liveagent.showWhenOffline(
          "573P00000004HZf",
          document.getElementById("liveagent_button_offline_573P00000004HZf")
        );
      });
    </script>

    <script
      type="text/javascript"
      src="https://c.la1-c1cs-ia2.salesforceliveagent.com/content/g/js/50.0/deployment.js"
    ></script>

    <script type="text/javascript">
      // variables that we want to pass to Salesforce
      // Used for testing, replace as needed.
      var firstName = "Dakota";
      var lastName = "Marcy";
      var email = "dakota@preChat.com";
      var subject = "Your subject goes here";
      var accountId = "0014100000NbEFsAAN";
      var chatOrigin = "Heartland Retail";
      var product = "TESTING";


      /*
       * addCustomDetails maps values into the prechat page for passing into Salesforce objects
       *
       * Syntax: 
       *   addCustomDetail(String label, String value)
       * Everything mapped through addCustomDetail will be displayed in a text field on the Case created by the Chat
       */
      // required for Contact and Case creation/mapping
      // FirstName, LastName, Email, AccountId, Subject
      liveagent.addCustomDetail("FirstName", firstName); 
      liveagent.addCustomDetail("LastName", lastName);
      liveagent.addCustomDetail("Email", email);
      liveagent.addCustomDetail("AccountId", accountId);
      liveagent.addCustomDetail("Subject", subject);

      liveagent.init(
        "https://d.la1-c1cs-ia2.salesforceliveagent.com/chat",
        "57241000000LQ4O",
        "00DP0000003pL4s"
      );

      // This is used to set the Display name of the user requesting a chat
      // if not set the Agent sees "Visitor"
      liveagent.setName(firstName + ' ' + lastName[0] + '.');
    </script>
    <!-- Embedded SErvice Starts Here -->

    <style type='text/css'>
      .embeddedServiceHelpButton .helpButton .uiButton {
        background-color: #005290;
        font-family: "Arial", sans-serif;
      }
      .embeddedServiceHelpButton .helpButton .uiButton:focus {
        outline: 1px solid #005290;
      }
    </style>
    
    <script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
    <script type='text/javascript'>
      var initESW = function(gslbBaseURL) {
        embedded_svc.settings.displayHelpButton = true; //Or false
        embedded_svc.settings.language = ''; //For example, enter 'en' or 'en-US'
    
        //embedded_svc.settings.defaultMinimizedText = '...'; //(Defaults to Chat with an Expert)
        //embedded_svc.settings.disabledMinimizedText = '...'; //(Defaults to Agent Offline)
    
        //embedded_svc.settings.loadingText = ''; //(Defaults to Loading)
        //embedded_svc.settings.storageDomain = 'yourdomain.com'; //(Sets the domain for your deployment so that visitors can navigate subdomains during a chat session)
    
        // Settings for Chat
        //embedded_svc.settings.directToButtonRouting = function(prechatFormData) {
          // Dynamically changes the button ID based on what the visitor enters in the pre-chat form.
          // Returns a valid button ID.
        //};
        embedded_svc.settings.prepopulatedPrechatFields = {
          FirstName: "Dakota",
          LastName: "Marcy",
          Email: "dakota.marcy@e-hps.com",
          Subject: "Request for assistance"
        }; //Sets the auto-population of pre-chat form fields

        embedded_svc.settings.extraPrechatFormDetails = [
          {
            "label":"First Name",
            "name":"FirstName",
            "value":firstName,
            "displayToAgent":true
          }, 
          {
            "label":"Last Name",
            "name":"LastName",
            "value":lastName,
            "displayToAgent":true
          }, 
          {
            "label":"Email",
            "name":"Email",
            "value":email,
            "displayToAgent":true
          },
          {
            "label":"Account ID",
            "name":"AccountId",
            "value":accountId,
            "displayToAgent":false
          }
        ];

        embedded_svc.settings.extraPrechatInfo = [
          {
            "EntityName":"Contact",
            "showOnCreate":true,
            "linkToEntityName":"Case",
            "linkToEntityField":"ContactId",
            "saveToTranscript":"ContactId",
            "entityFieldMaps": [{
              "isExactMatch":true,
              "fieldName":"FirstName",
              "doCreate":true,
              "doFind":true,
              "label":"First Name"
            }, {
              "isExactMatch":true,
              "fieldName":"LastName",
              "doCreate":true,
              "doFind":true,
              "label":"Last Name"
            }, {
              "isExactMatch":true,
              "fieldName":"Email",
              "doCreate":true,
              "doFind":true,
              "label":"Email"
            }]
          }, {
            "entityName":"Case",
            "showOnCreate":true,
            "saveToTranscript":"CaseId",
            "entityFieldMaps": [{
              "isExactMatch":false,
              "fieldName":"Subject",
              "doCreate":true,
              "doFind":false,
              "label":"Subject"
            }]
          }
        ];

        //embedded_svc.settings.fallbackRouting = []; //An array of button IDs, user IDs, or userId_buttonId
        //embedded_svc.settings.offlineSupportMinimizedText = '...'; //(Defaults to Contact Us)
    
        embedded_svc.settings.enabledFeatures = ['LiveAgent'];
        embedded_svc.settings.entryFeature = 'LiveAgent';
    
        embedded_svc.init(
          'https://heartlandpos--uat.my.salesforce.com',
          'https://uat-heartlandcommerce.cs4.force.com/lightningcommunity',
          gslbBaseURL,
          '00DP0000003pL4s',
          'Testing_Retail_POS_Chat',
          {
            baseLiveAgentContentURL: 'https://c.la1-c1cs-ia2.salesforceliveagent.com/content',
            deploymentId: '57241000000LQ4O',
            buttonId: '5732M000000XZTT',
            baseLiveAgentURL: 'https://d.la1-c1cs-ia2.salesforceliveagent.com/chat',
            eswLiveAgentDevName: 'EmbeddedServiceLiveAgent_Parent04IP0000000Cat6MAC_176f7986c16',
            isOfflineSupportEnabled: false
          }
        );
      };
    
      if (!window.embedded_svc) {
        var s = document.createElement('script');
        s.setAttribute('src', 'https://heartlandpos--uat.my.salesforce.com/embeddedservice/5.0/esw.min.js');
        s.onload = function() {
          initESW(null);
        };
        document.body.appendChild(s);
      } else {
        initESW('https://service.force.com');
      }
    </script>
  </body>
</html>